let operator = ""
let a = ""
let b = ""
let result = ""
const numbers = document.querySelectorAll(".number")
const operators = document.querySelectorAll(".operator")
let reset = document.getElementById("reset")
let screen = document.getElementById("screen")

// Fonction pour vérifier la longueur de l'affichage
function isDisplayFull() {
    return screen.textContent.length >= 15;
}

numbers.forEach(number => {
    number.addEventListener("click", function (e) {
        if (isDisplayFull()) return; // Ne rien faire si l'affichage est plein

        if (operator === "") {
            a = a + e.target.textContent;
            screen.textContent = a;
        } else {
            b = b + e.target.textContent;
            screen.textContent = a + operator + b;
        }
    })
})

operators.forEach(op => {
    op.addEventListener("click", function (e) {
        // Bloque si un opérateur est déjà défini ou si rien n'est entré
        if (operator !== "" || a === "" || isDisplayFull()) return;

        operator = e.target.textContent;
        screen.textContent = a + operator;
    })
})

document.getElementById("reset").addEventListener("click", function () {
    a = ""
    b = ""
    operator = ""
    result = ""
    screen.textContent = "0";
})

document.getElementById("undo").addEventListener("click", function () {
    let arr = screen.textContent.split("")
    arr.pop()
    screen.textContent = arr.join("")

    if (operator === "") {
        a = screen.textContent
    } else {
        b = screen.textContent.replace(a + operator, "")
    }
})

document.getElementById("result").addEventListener("click", function () {
    if (a !== "" && b !== "" && operator !== "") {
        let result;
        switch (operator) {
            case "+":
                result = parseFloat(a) + parseFloat(b);
                break;
            case "-":
                result = parseFloat(a) - parseFloat(b);
                break;
            case "*":
                result = parseFloat(a) * parseFloat(b);
                break;
            case "/":
                result = parseFloat(a) / parseFloat(b);
                break;
            case "%":
                result = parseFloat(a) % parseFloat(b);
                break;
            default:
                result = 0;
        }
        screen.textContent = result.toString().slice(0, 15);
        a = result.toString();
        b = "";
        operator = "";
    }
})


